{% extends 'base.html' %}

{% block content %}
<h1>Welcome, {{ user.username }}!</h1>

{% if no_plans %}
    <h2>You haven't saved any workout plans yet!</h2>
    <p>Would you like to:</p>
    <div class="mt-4">
        <a class="btn btn-primary" href="{% url 'pick_exercises' %}">Pick a Workout from the Community</a>
        <a class="btn btn-secondary" href="{% url 'create_workout_plan' %}">Create Your Own Workout Plan</a>
    </div>
{% else %}
    <h2>Your Saved Workout Plans</h2>
    <ul class="list-group mt-4">
        {% for workout in user_workout_plans %}
        <li class="list-group-item">
            <strong>{{ workout.title }}</strong> - Created on {{ workout.created_at }}
            <a href="{% url 'modify_workout' workout.id %}" class="btn btn-sm btn-info ml-3">Edit</a>
        </li>
        {% endfor %}
    </ul>
{% endif %}

<hr>

<h2>Your Previous Workouts</h2>
{% if grouped_workouts %}
    <ul class="list-group mt-4">
        {% for date, workouts in grouped_workouts.items %}
        <li class="list-group-item">
            <h4>Workout Date: {{ date }}</h4>
            <ul>
                {% for workout in workouts %}
                <li>{{ workout.exercise_set.exercise.name }} - {{ workout.reps }} reps @ {{ workout.weight }} kg</li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>You haven't completed any workouts yet.</p>
{% endif %}

{% endblock %}
